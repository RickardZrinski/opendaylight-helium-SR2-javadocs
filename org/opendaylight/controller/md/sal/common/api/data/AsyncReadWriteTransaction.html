<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_75) on Fri Mar 13 13:44:06 CET 2015 -->
<title>AsyncReadWriteTransaction</title>
<meta name="date" content="2015-03-13">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AsyncReadWriteTransaction";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncReadWriteTransaction.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/opendaylight/controller/md/sal/common/api/data/AsyncReadWriteTransaction.html" target="_top">Frames</a></li>
<li><a href="AsyncReadWriteTransaction.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.opendaylight.controller.md.sal.common.api.data</div>
<h2 title="Interface AsyncReadWriteTransaction" class="title">Interface AsyncReadWriteTransaction&lt;P extends org.opendaylight.yangtools.concepts.Path&lt;P&gt;,D&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>P</code> - Type of path (subtree identifier), which represents location in
            tree</dd><dd><code>D</code> - Type of data (payload), which represents data payload</dd></dl>
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data">AsyncReadTransaction</a>&lt;P,D&gt;, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data">AsyncTransaction</a>&lt;P,D&gt;, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data">AsyncWriteTransaction</a>&lt;P,D&gt;, org.opendaylight.yangtools.concepts.Identifiable&lt;java.lang.Object&gt;</dd>
</dl>
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/api/DOMDataReadWriteTransaction.html" title="interface in org.opendaylight.controller.md.sal.dom.api">DOMDataReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/binding/api/ReadWriteTransaction.html" title="interface in org.opendaylight.controller.md.sal.binding.api">ReadWriteTransaction</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/dom/spi/ForwardingDOMDataReadWriteTransaction.html" title="class in org.opendaylight.controller.md.sal.dom.spi">ForwardingDOMDataReadWriteTransaction</a>, <a href="../../../../../../../../org/opendaylight/controller/sal/connect/netconf/sal/tx/NetconfDeviceReadWriteTx.html" title="class in org.opendaylight.controller.sal.connect.netconf.sal.tx">NetconfDeviceReadWriteTx</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">AsyncReadWriteTransaction&lt;P extends org.opendaylight.yangtools.concepts.Path&lt;P&gt;,D&gt;</span>
extends <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data">AsyncReadTransaction</a>&lt;P,D&gt;, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data">AsyncWriteTransaction</a>&lt;P,D&gt;</pre>
<div class="block">Transaction enabling a client to have a combined read/write capabilities.

 <p>
 The initial state of the write transaction is stable snapshot of current data tree
 state captured when transaction was created and it's state and underlying
 data tree are not affected by other concurrently running transactions.

 <p>
 Write transactions are isolated from other concurrent write transactions. All
 writes are local to the transaction and represents only a proposal of state
 change for data tree and it is not visible to any other concurrently running
 transactions.

 <p>
 Applications publish the changes proposed in the transaction by calling <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#commit()"><code>AsyncWriteTransaction.commit()</code></a>
 on the transaction. This seals the transaction
 (preventing any further writes using this transaction) and submits it to be
 processed and applied to global conceptual data tree.

 <p>
 The transaction commit may fail due to a concurrent transaction modifying and committing data in
 an incompatible way. See <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#commit()"><code>AsyncWriteTransaction.commit()</code></a> for more concrete commit failure examples.

 <b>Implementation Note:</b> This interface is not intended to be implemented
 by users of MD-SAL, but only to be consumed by them.

 <h2>Examples</h2>

 <h3>Transaction local state</h3>

 Let assume initial state of data tree for <code>PATH</code> is <code>A</code>
 .

 <pre>
 txWrite = broker.newReadWriteTransaction(); // concurrent write transaction

 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional containing A
 txWrite.put(OPERATIONAL,PATH,B);            // writes B to PATH
 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional Containing B

 txWrite.commit().get();                     // data tree is updated, PATH contains B

 tx1afterCommit = broker.newReadOnlyTransaction(); // read Transaction is snapshot of new state
 tx1afterCommit.read(OPERATIONAL,PATH).get(); // returns Optional containing B
 </pre>

 As you could see read-write transaction provides capabilities as
 <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data"><code>AsyncWriteTransaction</code></a> but also allows for reading proposed changes as
 if they already happened.

 <h3>Transaction isolation (read transaction, read-write transaction)</h3> Let
 assume initial state of data tree for <code>PATH</code> is <code>A</code>.

 <pre>
 txRead = broker.newReadOnlyTransaction();   // read Transaction is snapshot of data
 txWrite = broker.newReadWriteTransaction(); // concurrent write transaction

 txRead.read(OPERATIONAL,PATH).get();        // will return Optional containing A
 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional containing A

 txWrite.put(OPERATIONAL,PATH,B);            // writes B to PATH
 txWrite.read(OPERATIONAL,PATH).get()        // will return Optional Containing B

 txRead.read(OPERATIONAL,PATH).get();        // concurrent read transaction still returns
                                             // Optional containing A

 txWrite.commit().get();                     // data tree is updated, PATH contains B
 txRead.read(OPERATIONAL,PATH).get();        // still returns Optional containing A

 tx1afterCommit = broker.newReadOnlyTransaction(); // read Transaction is snapshot of new state
 tx1afterCommit.read(OPERATIONAL,PATH).get(); // returns Optional containing B
 </pre>

 <h3>Transaction isolation (2 concurrent read-write transactions)</h3> Let
 assume initial state of data tree for <code>PATH</code> is <code>A</code>.

 <pre>
 tx1 = broker.newReadWriteTransaction(); // read Transaction is snapshot of data
 tx2 = broker.newReadWriteTransaction(); // concurrent write transaction

 tx1.read(OPERATIONAL,PATH).get();       // will return Optional containing A
 tx2.read(OPERATIONAL,PATH).get()        // will return Optional containing A

 tx2.put(OPERATIONAL,PATH,B);            // writes B to PATH
 tx2.read(OPERATIONAL,PATH).get()        // will return Optional Containing B

 tx1.read(OPERATIONAL,PATH).get();       // tx1 read-write transaction still sees Optional
                                         // containing A since is isolated from tx2
 tx1.put(OPERATIONAL,PATH,C);            // writes C to PATH
 tx1.read(OPERATIONAL,PATH).get()        // will return Optional Containing C

 tx2.read(OPERATIONAL,PATH).get()        // tx2 read-write transaction still sees Optional
                                         // containing B since is isolated from tx1

 tx2.commit().get();                     // data tree is updated, PATH contains B
 tx1.read(OPERATIONAL,PATH).get();       // still returns Optional containing C since is isolated from tx2

 tx1afterCommit = broker.newReadOnlyTransaction(); // read Transaction is snapshot of new state
 tx1afterCommit.read(OPERATIONAL,PATH).get(); // returns Optional containing B

 tx1.commit()                            // Will fail with OptimisticLockFailedException
                                         // which means concurrent transaction changed the same PATH

 </pre>

 <p>
 <b>Note:</b> examples contains blocking calls on future only to illustrate
 that action happened after other asynchronous action. Use of blocking call
 <code>Future.get()</code> is discouraged for most uses and you should
 use
 <code>Futures.addCallback(com.google.common.util.concurrent.ListenableFuture, com.google.common.util.concurrent.FutureCallback)</code>
 or other functions from <code>Futures</code> to
 register more specific listeners.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data"><code>AsyncReadTransaction</code></a>, 
<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data"><code>AsyncWriteTransaction</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.opendaylight.controller.md.sal.common.api.data.AsyncWriteTransaction">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.opendaylight.controller.md.sal.common.api.data.<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data">AsyncWriteTransaction</a></h3>
<code><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#cancel()">cancel</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#commit()">commit</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#delete(org.opendaylight.controller.md.sal.common.api.data.LogicalDatastoreType,%20P)">delete</a>, <a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncWriteTransaction.html#submit()">submit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.opendaylight.controller.md.sal.common.api.data.AsyncTransaction">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.opendaylight.controller.md.sal.common.api.data.<a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data">AsyncTransaction</a></h3>
<code><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html#getIdentifier()">getIdentifier</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncReadWriteTransaction.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncReadTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../../org/opendaylight/controller/md/sal/common/api/data/AsyncTransaction.html" title="interface in org.opendaylight.controller.md.sal.common.api.data"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?org/opendaylight/controller/md/sal/common/api/data/AsyncReadWriteTransaction.html" target="_top">Frames</a></li>
<li><a href="AsyncReadWriteTransaction.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
